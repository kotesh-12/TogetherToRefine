generalfeedback.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TTR - Teacher Feedback</title><!-- Back Button -->
<div class="back-button" onclick="goBack()">üîô Back</div>
  <style>
  .back-button {
  position: absolute;
  top: 20px;
  left: 20px;
  background-color: #3498db;
  color: white;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  z-index: 999;
}
.back-button:hover {
  background-color: #217dbb;
}
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #f0f8ff, #e6f7ff);
    }

    header {
      background-color: #333;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 32px;
      font-weight: bold;
    }

    #announcement {
      background: #fffae6;
      padding: 10px;
      color: #333;
      font-weight: bold;
      overflow: hidden;
      white-space: nowrap;
      animation: scroll-left 10s linear infinite;
    }

    @keyframes scroll-left {
      from { transform: translateX(100%); }
      to { transform: translateX(-100%); }
    }

    .container {
      padding: 20px;
      max-width: 600px;
      margin: auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .dropdown-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    select, textarea {
      width: 100%;
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    textarea {
      resize: vertical;
      height: 100px;
    }

    button {
      background-color: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
    }

    .home-icon {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 40px;
      height: 40px;
      background: url('https://cdn-icons-png.flaticon.com/512/1946/1946436.png') no-repeat center center;
      background-size: contain;
    }

    .profile-box {
      position: fixed;
      top: 20px;
      right: 20px;
      display: flex;
      align-items: center;
    }

    .profile-box img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .profile-box .details {
      text-align: right;
      font-size: 14px;
    }

    .profile-box .details strong {
      display: block;
    }

    .stars {
      display: flex;
      gap: 5px;
      margin-top: 5px;
      margin-bottom: 10px;
    }

    .star {
      font-size: 24px;
      cursor: pointer;
      color: #ccc;
      transition: color 0.3s;
    }

    .star.selected {
      color: gold;
    }
  </style>
</head>
<body>

  <header>TTR - Together to Refine</header>

  <div id="announcement">üì¢ New cycle starts on 10th of this month | Please submit feedback before deadline.</div>

  <div class="profile-box">
    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Profile">
    <div class="details">
      <strong>Teacher Name</strong>
      Feedback: 87%
    </div>
  </div>

  <div class="container">
    <h2>Provide Feedback for a Student</h2>

    <!-- Behavior -->
    <div class="dropdown-group">
      <label for="behavior">Behavior</label>
      <select id="behavior">
        <option disabled selected>Choose...</option>
        <option>Excellent</option>
        <option>Good</option>
        <option>Average</option>
        <option>Poor</option>
      </select>
      <div class="stars" data-category="behavior">
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
      </div>
    </div>

    <!-- Communication -->
    <div class="dropdown-group">
      <label for="communication">Communication</label>
      <select id="communication">
        <option disabled selected>Choose...</option>
        <option>Excellent</option>
        <option>Good</option>
        <option>Average</option>
        <option>Poor</option>
      </select>
      <div class="stars" data-category="communication">
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
      </div>
    </div>

    <!-- Body Language -->
    <div class="dropdown-group">
      <label for="body-language">Body Language</label>
      <select id="body-language">
        <option disabled selected>Choose...</option>
        <option>Excellent</option>
        <option>Good</option>
        <option>Average</option>
        <option>Poor</option>
      </select>
      <div class="stars" data-category="body-language">
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
      </div>
    </div>

    <!-- Hard Working Nature -->
    <div class="dropdown-group">
      <label for="hard working nature">Hard Working Nature</label>
      <select id="hard working nature">
        <option disabled selected>Choose...</option>
        <option>Excellent</option>
        <option>Good</option>
        <option>Average</option>
        <option>Poor</option>
      </select>
      <div class="stars" data-category="hard working nature">
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
        <span class="star">&#9733;</span>
      </div>
    </div>

    <!-- Comments -->
    <div class="dropdown-group">
      <label for="comments">Comments (optional)</label>
      <textarea id="comments" placeholder="Write your thoughts here..."></textarea>
    </div>

    <!-- Submit -->
   
<button onclick="submitGeneralFeedback()" style="background-color: #4CAF50; color: white;">Submit</button>
  </div>
 <script>
  const ratings = {
    behavior: 0,
    communication: 0,
    "body-language": 0,
    "hard working nature": 0
  };

  window.ratings = ratings; // ‚úÖ Make ratings global

  document.querySelectorAll('.stars').forEach(group => {
    const category = group.dataset.category;
    const stars = group.querySelectorAll('.star');

    stars.forEach((star, index) => {
      star.addEventListener('click', () => {
        ratings[category] = index + 1;
        stars.forEach((s, i) => {
          s.classList.toggle('selected', i <= index);
        });
      });
    });
  });

  function goHome() {
    alert("Returning to home page...");
  }

  function submitGeneralFeedback() {
    const data = {
      behavior: {
        dropdown: document.getElementById("behavior").value,
        stars: ratings["behavior"]
      },
      communication: {
        dropdown: document.getElementById("communication").value,
        stars: ratings["communication"]
      },
      bodyLanguage: {
        dropdown: document.getElementById("body-language").value,
        stars: ratings["body-language"]
      },
      "hard working nature": {
        dropdown: document.getElementById("hard working nature").value,
        stars: ratings["hard working nature"]
      },
      comments: document.getElementById("comments").value
    };

    console.log(data);

    // Simple validation
    if (
      !data.behavior.dropdown || !data.behavior.stars ||
      !data.communication.dropdown || !data.communication.stars ||
      !data.bodyLanguage.dropdown || !data.bodyLanguage.stars ||
      !data["hard working nature"].dropdown || !data["hard working nature"].stars
    ) {
      alert("Please provide ratings and dropdown selections for all categories.");
      return;
    }

    alert("Feedback submitted successfully!");

    // You can now redirect or store in Firebase here
    window.location.href = "submit.html";
  }
</script>


  
 <script type="module">
 window.ratings = ratings;
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import {
    getFirestore,
    collection,
    addDoc,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDWHnST2fHu2xgtL3tu7WQ0bJZ6AMzfPbY",
    authDomain: "together-to-refine.firebaseapp.com",
    projectId: "together-to-refine",
    storageBucket: "together-to-refine.appspot.com",
    messagingSenderId: "902921672660",
    appId: "1:902921672660:web:ca8db0c1d99e42159b70aa",
    measurementId: "G-LSFGN39R1W"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ratings object must match field keys exactly
  const rating = window.ratings;

  window.submitGeneralFeedback = async () => {
    const behavior = document.getElementById("behavior").value;
    const communication = document.getElementById("communication").value;
    const bodyLanguage = document.getElementById("body-language").value;
    const hardworking = document.getElementById("hard working nature").value;
    const comment = document.getElementById("comments").value;

    // Validate all dropdowns and star ratings
    if (
      !behavior || !communication || !bodyLanguage || !hardworking ||
      !ratings.behavior || !ratings.communication || !ratings["body-language"] || !ratings["hard working nature"]
    ) {
      alert("Please give ratings (dropdown + stars) for all categories.");
      return;
    }

    try {
      await addDoc(collection(db, "general_feedback"), {
        behavior: {
          dropdown: behavior,
          stars: ratings.behavior
        },
        communication: {
          dropdown: communication,
          stars: ratings.communication
        },
        bodyLanguage: {
          dropdown: bodyLanguage,
          stars: ratings["body-language"]
        },
        hardworking: {
          dropdown: hardworking,
          stars: ratings["hard working nature"]
        },
        comment,
        timestamp: serverTimestamp()
      });

      // Success: redirect
      window.location.href = "submit.html";
    } catch (err) {
      console.error("Error submitting feedback:", err);
      alert("Unsuccessful! Please try again.");
    }
  };
</script>
      <script>
  function goBack() {
    window.location.href = "profileview.html"; // üîÅ Redirect to profile view
  }
</script>
      
      </body>
</html>